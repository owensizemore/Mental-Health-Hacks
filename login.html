<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Login - Sapphire</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.2/css/bulma.min.css">
	<script src="https://kit.fontawesome.com/78e1b96a9f.js" crossorigin="anonymous">
	</script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js">
	</script>
</head>

<body>
	<!-- Begin navigation -->
	<div id="nav-placeholder">
	</div>

	<script>
		$(function(){
          $("#nav-placeholder").load("nav.html");
        });
	</script>
	<!-- end of navigation-->

	<!-- Login form -->
	<div style="max-width:800px; margin-left: auto; margin-right: auto;">
    <section class="section">
      <div class="box">
        <h1 class="title">Login</h1>
        <div class="field">
          <p class="control has-icons-left">
            <input id="user" class="input" type="email" placeholder="Username or Email">
            <span class="icon is-small is-left">
              <i class="fas fa-user"></i>
            </span>
          </p>
        </div>
        <div class="field">
          <p class="control has-icons-left">
            <input id="pass" class="input" type="password" placeholder="Password">
            <span class="icon is-small is-left">
              <i class="fas fa-lock"></i>
            </span>
          </p>
          <p id="failureMessage" class="help is-danger" style="visibility: hidden;">Incorrect username or password. Try again.</p>
        </div>
        <div class="field">
          <p class="control">
            <button class="button is-link" onclick="getLogin()" >
              <strong>Login</strong>
            </button>
          </p>
        </div>
        <p>Don't have an account yet? <a href="onboard.html">Register now</a></p>
      </div>
    </section>
  </div>

  <script>
    function getLogin() {
      let user = document.getElementById("user").value;
      let pass = document.getElementById("pass").value;
      let loggedIn = false;
      if (user == "emmazhang") {
        if (pass == "12345") {
          loggedIn = true;

          sessionStorage.setItem("nameOfUser", "Emma");
          sessionStorage.setItem("userLevel", "7");
          sessionStorage.setItem("userProgress", "50");
          sessionStorage.setItem("userXpRemaining", "400");

          sessionStorage.setItem("task1", "com");
          sessionStorage.setItem("task2", "com");
          sessionStorage.setItem("task3", "com");
          sessionStorage.setItem("task4", "inc");
          sessionStorage.setItem("task5", "inc");
          sessionStorage.setItem("total", "3");

          window.location.href="dashboard.html";
        }
      } else if (user == "owensizemore") {
        if (pass == "12345") {
          loggedIn = true;

          //User's name, level and XP remaining
          sessionStorage.setItem("nameOfUser", "Owen");
          sessionStorage.setItem("userLevel", "6");
          sessionStorage.setItem("userProgress", "30");
          sessionStorage.setItem("userXpRemaining", "300");

          //Task checks
          sessionStorage.setItem("task1", "com");
          sessionStorage.setItem("task2", "com");
          sessionStorage.setItem("task3", "com");
          sessionStorage.setItem("task4", "inc");
          sessionStorage.setItem("task5", "inc");
          sessionStorage.setItem("total", "3");

          window.location.href="dashboard.html";
        }
      } else if (loggedIn == false) {
        document.getElementById("failureMessage").style.visibility = "visible";
      }
    }
  </script>
</body>
</html>